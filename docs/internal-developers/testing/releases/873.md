# Testing notes and ZIP for release 8.7.3

Zip file for testing: [woocommerce-gutenberg-products-block.zip](https://github.com/woocommerce/woocommerce-blocks/files/9831749/woocommerce-gutenberg-products-block.zip)

## Feature plugin and package inclusion in WooCommerce

### Fix wrong keys being sent in canMakePayment and customer data showing in the Checkout block in the editor ([7434](https://github.com/woocommerce/woocommerce-blocks/pull/7434))

#### User Facing Testing

1. Ensure you can check out using Stripe. Please also try various other payment gateways.
2. If you can, please check out with an express payment method.
3. Open the Checkout block in the editor. Ensure your customer details are not there.
4. Upload this extension [extension-for-testing.zip](https://github.com/woocommerce/woocommerce-blocks/files/9828874/extension-for-testing.zip) to your site and activate it. Ensure you see a payment method called `some-extension-name payment method` on your checkout. (see the notes below for explanation of this testing step!)

##### ðŸ“” Note

The extension used in step 4 of the testing registers a payment method and contains the following code in the `canMakePayment` argument:

```js
canMakePayment: (args) => {
			const requiredKeys = [
				'billingData',
				'billingAddress',
				'cart',
				'cartNeedsShipping',
				'cartTotals',
				'paymentRequirements',
				'selectedShippingMethods',
				'shippingAddress',
			];
			const argKeys = Object.keys(args);

			const requiredCartKeys = [
				'cartCoupons',
				'cartItems',
				'crossSellsProducts',
				'cartFees',
				'cartItemsCount',
				'cartItemsWeight',
				'cartNeedsPayment',
				'cartNeedsShipping',
				'cartItemErrors',
				'cartTotals',
				'cartIsLoading',
				'cartErrors',
				'billingData',
				'billingAddress',
				'shippingAddress',
				'extensions',
				'shippingRates',
				'isLoadingRates',
				'cartHasCalculatedShipping',
				'paymentRequirements',
				'receiveCart',
			];
			const cartKeys = Object.keys(args.cart);
			const requiredTotalsKeys = [
				'total_items',
				'total_items_tax',
				'total_fees',
				'total_fees_tax',
				'total_discount',
				'total_discount_tax',
				'total_shipping',
				'total_shipping_tax',
				'total_price',
				'total_tax',
				'tax_lines',
				'currency_code',
				'currency_symbol',
				'currency_minor_unit',
				'currency_decimal_separator',
				'currency_thousand_separator',
				'currency_prefix',
				'currency_suffix',
			];
			const totalsKeys = Object.keys(args.cartTotals);
			return (
				requiredKeys.every((key) => argKeys.includes(key)) &&
				requiredTotalsKeys.every((key) => totalsKeys.includes(key)) &&
				requiredCartKeys.every((key) => cartKeys.includes(key))
			);
		}
```

The test here is that all the expected keys are on the argument passed to `canMakePayment`. Testing this on release 8.6.0 should still have this method show up, but it will not show on 8.7.0 where this bug is present.

